---
id: tun-8812
status: closed
deps: [tun-b9c8]
links: []
created: 2026-01-27T18:08:14Z
type: task
priority: 1
tags: [issue-313, phase-3, facade]
---
# Phase 3: Route messaging through tools/messaging/ facade

Create tools/messaging/ facade that re-exports from utils/messaging/. Core imports from Layer 2, respecting architecture (types/ has no behavior).

## References
- Plan: memory-bank/plan/2026-01-27_17-59-28_issue-313-core-utils-layer-violation.md (Task 3)
- Architecture: docs/architecture/NEW_layers.html (Phase 3)
- Issue: https://github.com/alchemiststudiosDOTai/tunacode/issues/313

## Create
- tools/messaging/__init__.py (re-exports: estimate_tokens, get_content, find_dangling_tool_calls, etc.)

## Update Imports In
- core/agents/resume/sanitize_debug.py, sanitize.py, summary.py, prune.py
- core/state.py, core/messaging.py

## Keep
- utils/messaging/ stays in Layer 3 (accessed via facade)

## Acceptance Criteria

tools/messaging/__init__.py exists; core imports from tools.messaging; utils/messaging/ remains; tests pass

