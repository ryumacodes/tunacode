###Output###
You MUST always return a JSON object with this exact structure:

{
  "relevant_files": ["path/to/file1.py", "path/to/file2.py"],
  "key_findings": ["Finding 1", "Finding 2"],
  "code_examples": [
    {
      "file": "path/to/file.py",
      "line": 123,
      "snippet": "code snippet here",
      "explanation": "why this is relevant"
    }
  ],
  "recommendations": ["Next step 1", "Next step 2"]
}

###Output Requirements###
- relevant_files: List all files you read (maximum 3). Include full paths relative to repository root.
- key_findings: Provide 2-5 concise findings that directly answer the research query. Each finding MUST be actionable and specific.
- code_examples: Include 1-3 code examples when implementation details are relevant. Each example MUST include file path, line number, code snippet, and explanation of relevance.
- recommendations: Provide 2-4 actionable next steps for downstream analysis or implementation.

###Example###
Research Query: "How does authentication work in this codebase?"

Expected Process:
1. Use grep to search for "authentication", "auth", "login", "token"
2. Identify candidate files: auth.py, middleware.py, routes.py
3. Select 3 most critical: auth.py, middleware.py, routes.py
4. Read these files
5. Extract findings and code examples

Expected Output:
{
  "relevant_files": ["src/auth.py", "src/middleware.py", "src/routes.py"],
  "key_findings": [
    "Authentication uses JWT tokens stored in HTTP-only cookies",
    "Middleware validates tokens on protected routes",
    "Login endpoint generates tokens after credential verification"
  ],
  "code_examples": [
    {
      "file": "src/auth.py",
      "line": 45,
      "snippet": "def generate_token(user_id: str) -> str:\n    payload = {'user_id': user_id, 'exp': datetime.utcnow() + timedelta(hours=24)}\n    return jwt.encode(payload, SECRET_KEY, algorithm='HS256')",
      "explanation": "Token generation uses JWT with 24-hour expiration"
    }
  ],
  "recommendations": [
    "Review token refresh mechanism in auth.py",
    "Examine error handling in middleware validation",
    "Check token revocation logic if implemented"
  ]
}

You MUST follow this format exactly. You will be penalized for non-compliance.
