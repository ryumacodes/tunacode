---
title: TunaCode Structure Documentation Index
path: docs/codebase-map/structure
type: index
depth: 0
description: Index of all structure analysis documents
---

# TunaCode Structure Documentation

## Overview
This directory contains the **structure analysis** of the TunaCode codebase, generated by the Structure Agent at depth 0 (root-level analysis).

## Documentation Files

### Root Module
**[00-root-overview.md](00-root-overview.md)**
- Location: `src/tunacode/`
- Contents: Constants, exceptions, package initialization
- Key Files: `constants.py`, `exceptions.py`

### Primary Modules

**[01-ui-directory.md](01-ui-directory.md)**
- Location: `src/tunacode/ui/`
- Purpose: Textual-based TUI implementation
- Key Components: Screens, widgets, renderers, app.py

**[02-core-directory.md](02-core-directory.md)**
- Location: `src/tunacode/core/`
- Purpose: Agent orchestration and state management
- Key Components: Agents, prompting, state, background tasks

**[03-tools-directory.md](03-tools-directory.md)**
- Location: `src/tunacode/tools/`
- Purpose: Agent capability implementations
- Key Components: File operations, search, execution

**[04-configuration-directory.md](04-configuration-directory.md)**
- Location: `src/tunacode/configuration/`
- Purpose: Application settings and model registry
- Key Components: Settings, models, pricing, defaults

**[05-cli-directory.md](05-cli-directory.md)**
- Location: `src/tunacode/cli/`
- Purpose: Command-line interface and REPL
- Key Components: Slash commands, command implementations, REPL components

### Supporting Modules

**[06-supporting-modules.md](06-supporting-modules.md)**
- Locations: Various directories under `src/tunacode/`
- Purpose: Auxiliary functionality
- Modules Covered:
  - `indexing/` - Code search infrastructure
  - `lsp/` - Language Server Protocol client
  - `services/` - External integrations
  - `types/` - Type definitions
  - `utils/` - General utilities
  - `tutorial/` - Interactive tutorials
  - `prompts/` - Prompt templates
  - `tools_utils/` - Shared tool utilities

## Directory Structure Summary

```
src/tunacode/
├── __init__.py              # Package initialization
├── constants.py             # Global constants and themes
├── exceptions.py            # Exception hierarchy
├── py.typed                 # Type hint marker
│
├── ui/                      # Terminal User Interface
│   ├── app.py              # Main Textual app
│   ├── main.py             # REPL entry point
│   ├── screens/            # Modal dialogs
│   ├── widgets/            # Custom widgets
│   ├── renderers/          # Output formatting
│   ├── components/         # Reusable components
│   ├── commands/           # UI command handlers
│   ├── headless/           # Non-interactive mode
│   └── styles/             # CSS and theming
│
├── core/                    # Agent orchestration
│   ├── agents/             # Agent implementations
│   │   ├── main.py         # Primary agent
│   │   ├── research_agent.py
│   │   └── agent_components/
│   ├── state/              # State management
│   ├── prompting/          # Prompt construction
│   ├── setup/              # Setup wizard
│   ├── background/         # Async tasks
│   ├── token_usage/        # Cost tracking
│   └── logging/            # Structured logging
│
├── tools/                   # Agent tools
│   ├── bash.py             # Shell execution
│   ├── grep.py             # Content search
│   ├── glob.py             # File matching
│   ├── read_file.py        # File reading
│   ├── write_file.py       # File writing
│   ├── update_file.py      # File editing
│   ├── list_dir.py         # Directory listing
│   ├── web_fetch.py        # HTTP requests
│   ├── todo.py             # TODO management
│   ├── decorators.py       # Tool decorators
│   ├── grep_components/    # Search implementation
│   ├── prompts/            # Tool descriptions
│   └── utils/              # Tool utilities
│
├── configuration/           # Settings management
│   ├── settings.py         # User preferences
│   ├── models.py           # Model definitions
│   ├── models_registry.json
│   ├── pricing.py          # Cost tracking
│   └── defaults.py         # Factory defaults
│
├── cli/                     # Command-line interface
│   ├── commands/
│   │   ├── implementations/ # Command handlers
│   │   └── slash/           # Slash command specs
│   └── repl_components/     # REPL building blocks
│
├── indexing/                # Code search
├── lsp/                     # Language Server Protocol
├── services/                # External integrations
├── types/                   # Type definitions
├── utils/                   # General utilities
│   ├── config/
│   ├── messaging/
│   ├── parsing/
│   ├── system/
│   └── ui/
├── tutorial/                # Interactive tutorials
├── prompts/                 # Prompt templates
│   ├── research/sections/
│   └── sections/
└── tools_utils/             # Shared tool utilities
```

## Naming Conventions

### Files and Directories
- **snake_case**: All files and directories use lowercase with underscores
- Examples: `read_file.py`, `agent_components/`, `models_registry.json`

### Code
- **Classes**: `CamelCase` - Example: `ToolExecutionError`, `TunaCodeApp`
- **Functions/Methods**: `snake_case` - Example: `read_file()`, `calculate_cost()`
- **Constants**: `UPPER_SNAKE_CASE` - Example: `APP_NAME`, `UI_COLORS`
- **Enums**: `CamelCase` class, `UPPER_SNAKE_CASE` members
  ```python
  class ToolName(str, Enum):
      READ_FILE = "read_file"
      WRITE_FILE = "write_file"
  ```

### Type Annotations
- **Explicit**: All functions fully typed
- **Aliases**: Common types defined in `tunacode.types`
- Examples: `FilePath`, `ErrorMessage`, `ToolName`

## Organization Patterns

### Layered Architecture
```
┌─────────────────────┐
│   UI (Presentation) │  ← ui/, cli/
├─────────────────────┤
│   Core (Business)   │  ← core/, agents/
├─────────────────────┤
│   Tools (Capabilities)│ ← tools/
├─────────────────────┤
│   Config (Settings)  │  ← configuration/
└─────────────────────┘
```

### Dependency Flow
- **UI → Core → Tools → Configuration**
- **All modules → Types → Exceptions → Constants**
- **Supporting modules → Used by any layer as needed**

### Key Principles
1. **Separation of Concerns**: Each module has a single, clear purpose
2. **Dependency Direction**: Higher layers depend on lower layers
3. **Type Safety**: Full type annotation coverage
4. **Error Handling**: Rich exceptions with recovery guidance
5. **Configuration**: Centralized settings with sensible defaults
6. **Testability**: Isolated modules enable comprehensive testing

## Seams (Integration Points)

Each module document lists its **seams** - the key files that define the module's interface and integration points:

- **Root Module**: `constants`, `exceptions`, `types`
- **UI Module**: `app.py`, `main.py`, `renderers`, `screens`, `widgets`
- **Core Module**: `agents`, `state`, `prompting`, `setup`
- **Tools Module**: `bash`, `grep`, `read_file`, `write_file`, `decorators`
- **Configuration**: `settings`, `models`, `pricing`, `defaults`
- **CLI Module**: `commands`, `repl_components`, `textual_repl`

These seams represent the primary files where:
- Other modules make calls
- Data flows across boundaries
- Errors are caught and transformed
- Extension points are defined

## Analysis Metadata

- **Depth**: 0 (root-level analysis)
- **Agent**: Structure Agent
- **Tool Used**: Gemini MCP (gemini-2.5-flash)
- **Date**: 2026-01-04
- **Output Directory**: `/Users/tuna/Desktop/tunacode/docs/codebase-map/structure/`

## Next Steps

For deeper analysis, subsequent agents should:
1. **Depth 1**: Analyze individual subdirectories in detail
2. **Depth 2**: Document specific files and their relationships
3. **Generate**: Call graphs, type dependency diagrams, architecture visualizations

## Related Documentation

- **Architecture**: See `docs/codebase-map/architecture/` for system design
- **APIs**: See `docs/codebase-map/api/` for interface documentation
- **Patterns**: See `docs/codebase-map/patterns/` for recurring design motifs
